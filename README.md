# ğŸ¿ ì˜í™” ì•±

> ìµœì‹  ì˜í™”ì˜ ìˆœìœ„ ë° ì¥ë¥´ ë³„ ì˜í™”ë¥¼ ì°¾ì•„ë³¼ ìˆ˜ ìˆëŠ” ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ì•±ì…ë‹ˆë‹¤â˜ºï¸
> 

| ê°œë°œ ì¸ì› | ì œì‘ ê¸°ê°„ |
| --- | --- |
| 1ì¸ ê°œë°œ | 5.16 ~ 5.30(2ì£¼) |

# ğŸŒ³ ëª©ì°¨
1. [ğŸ“º ì‹¤í–‰ í™”ë©´](#-ì‹¤í–‰-í™”ë©´)
2. [ğŸ  í”„ë¡œì íŠ¸ êµ¬ì¡°](#-í”„ë¡œì íŠ¸-êµ¬ì¡°)
3. [ğŸ“š Library](#-Library)
4. [ğŸ¤¨ ê³ ë¯¼ê³¼ í•´ê²°](#-ê³ ë¯¼ê³¼-í•´ê²°)

# ğŸ“º ì‹¤í–‰ í™”ë©´

| í™ˆí™”ë©´ ë·° | ë””í…Œì¼ ë·° | ì¥ë¥´ ë·° |
| --- | --- | --- |
|<img src="https://github.com/longlivedrgn/ios-movie-app/assets/85781941/1bafa8d2-653a-439f-97e0-ff8d8e799466" width="250"/>|<img src="https://github.com/longlivedrgn/ios-movie-app/assets/85781941/ab1bfc3c-e898-410b-80fb-248a27002045" width="250"/>|<img src="https://github.com/longlivedrgn/ios-movie-app/assets/85781941/f304af30-9659-49d0-bb04-41bc9208a95c" width="250"/>|

| ì„œì¹˜ ë·° | ì¦ê²¨ì°¾ê¸° ë·° |
| --- | --- |
|<img src="https://github.com/longlivedrgn/ios-movie-app/assets/85781941/10e820c3-cbe6-48e2-8cdc-aaf51e34c509" width="250"/>|<img src="https://github.com/longlivedrgn/ios-movie-app/assets/85781941/002b45d7-c5ce-4752-9756-df9404d9b1ae" width="250"/>

# ğŸ  í”„ë¡œì íŠ¸ êµ¬ì¡°
<img width="600" alt="image" src="https://github.com/longlivedrgn/ios-movie-app/assets/85781941/9f2d8bb7-65d6-40af-ab7f-831cbdf5d45a">

# ğŸ“š Library

| **Autolayout** |
| --- |
| Snapkit |
- Autolayoutì„ ì¡ì•„ì¤„ ë•Œ ì‚¬ìš©ë˜ëŠ” boilerplate ì½”ë“œë¥¼ ì¤„ì´ê¸°ìœ„í•˜ì—¬ Snapkit ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í–ˆì–´ìš”.

# ğŸ¤¨ ê³ ë¯¼ê³¼ í•´ê²°
  * [ğŸ’¥ í•˜ë‚˜ì˜ datasourceë¥¼ í™œìš©í•˜ì—¬ ì„œë¡œ ë‹¤ë¥¸ API ë°ì´í„° ëª¨ë¸ ì²˜ë¦¬í•˜ê¸°](#-í•˜ë‚˜ì˜-datasourceë¥¼-í™œìš©í•˜ì—¬-ì„œë¡œ-ë‹¤ë¥¸-api-ë°ì´í„°-ëª¨ë¸-ì²˜ë¦¬í•˜ê¸°)
  * [ğŸ’¥ Collection View ë ˆì´ì•„ì›ƒ ì§œê¸°](#-collection-view-ë ˆì´ì•„ì›ƒ-ì§œê¸°)
  * [ğŸ’¥ ê°€ë³€ì ì¸ cell êµ¬í˜„í•˜ê¸°](#-ê°€ë³€ì ì¸-cell-êµ¬í˜„í•˜ê¸°)
  * [ğŸ’¥ ë¬´ê±°ì›Œì§„ view controller ëœì–´ë‚´ê¸°](#-ë¬´ê±°ì›Œì§„-view-controller-ëœì–´ë‚´ê¸°)
  * [ğŸ’¥ View controllerì˜ ìˆœí™˜ ì°¸ì¡° ë¬¸ì œ](#-view-controllerì˜-ìˆœí™˜-ì°¸ì¡°-ë¬¸ì œ)

## ğŸ’¥ í•˜ë‚˜ì˜ datasourceë¥¼ í™œìš©í•˜ì—¬ ì„œë¡œ ë‹¤ë¥¸ API ë°ì´í„° ëª¨ë¸ ì²˜ë¦¬í•˜ê¸°
<details>
<summary>ğŸ“ Please Open</summary>


 
â‰ï¸ `DiffableDatasource`ë¥¼ ì‚¬ìš©í•œ ì´ìœ 

- Home scene ì† ìƒë‹¨ sectionì€ ì¸ê¸° ìˆëŠ” ì˜í™” ë³´ì—¬ì£¼ê³ , í•˜ë‹¨ sectionì€ ì „ì²´ ì˜í™”ë¥¼ ì¥ë¥´ ë³„ë¡œ ë‚˜ëˆ´ì–´ìš”.
- ìƒë‹¨ section(ì´í•˜ rank section)ì˜ ê²½ìš°, headerì— ì¸ê¸° ìƒìŠ¹ ìˆœ, ì˜í™” ê°œë´‰ ìˆœ ë²„íŠ¼ì„ ë‘ì–´ í•´ë‹¹ ê¸°ì¤€ì„ í†µí•˜ì—¬ ì˜í™”ë“¤ì´ sortingì´ ë˜ë„ë¡ êµ¬í˜„ì„ í•´ë³´ì•˜ì–´ìš”. ë˜í•œ, í•˜ë‹¨ì˜ ì¥ë¥´ë³„ ì˜í™” section(ì´í•˜ genre section)ì˜ ê²½ìš°ì—ë„, ë”ë³´ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ ìˆ¨ê²¨ì§„ ë‚˜ë¨¸ì§€ ì…€ë“¤ì„ ë³´ì—¬ì£¼ë„ë¡ êµ¬í˜„ì„ í•´ë³´ì•˜ì–´ìš”.
- **ê¸°ì¡´ì—ëŠ” reloadDataë¥¼ í™œìš©í•˜ì—¬ controllerê°€ ë³€ê²½ì‚¬í•­ì„ UIì—ê²Œ ì•Œë ¤ì£¼ëŠ” ë™ê¸°í™” ì‘ì—…ì„ í•´ì£¼ì—ˆì–´ìš”. ê·¸ëŸ¬ë‚˜, í•´ë‹¹ í”„ë¡œì íŠ¸ì—ì„œëŠ” ë ˆì´ì•„ì›ƒ UIê°€ ë¹ˆë²ˆí•˜ê²Œ ë³€ê²½ë˜ë©° ì• ë‹ˆë©”ì´ì…˜ì´ ìë™ìœ¼ë¡œ ì ìš©ë˜ì§€ ì•ŠëŠ” reloadDataë¥¼ í™œìš©í•˜ì—¬ ë™ê¸°í™”ë¥¼ ì§„í–‰í•  ê²½ìš°,  ì‚¬ìš©ì UX ê²½í—˜ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆë‹¤ê³  íŒë‹¨ì´ ë“¤ì—ˆê¸°ì— DiffableDatasourceë¥¼ í™œìš©í–ˆì–´ìš”.**

Diffabledatasourceì˜ ê²½ìš°, í•˜ë‚˜ì˜ collection viewì—ì„œ í•˜ë‚˜ì˜ item identifier íƒ€ì…ì„ ê°€ì§€ê³  ìˆì–´ìš”. ê°ê°ì˜ ì„¹ì…˜ì€ ì„œë¡œ ë‹¤ë¥¸ API í˜¸ì¶œì„ í•˜ë¯€ë¡œ, ë‹¤ë¥¸ ë°ì´í„° ëª¨ë¸ì„ ê°€ì§€ê³  í•˜ë‚˜ì˜ datasource item identifier íƒ€ì…ì„ ë§Œë“¤ì–´ì¤˜ì•¼í–ˆì–´ìš”. ë‹¤ìŒì€ ì œê°€ í•´ë‹¹ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ê³ ë¯¼í–ˆë˜ ê³¼ì •ì´ì—ìš”.

### 1ï¸âƒ£ ë‘ ê°€ì§€ì˜ ëª¨ë¸ì„ ë¬¶ì–´ì¤„ ìˆ˜ ìˆëŠ” í•˜ë‚˜ì˜ Item Identifier íƒ€ì… ìƒì„±í•˜ê¸°

- ì €ëŠ” ë‘ APIë¥¼ í†µí•´ì„œ ë°›ì•„ì˜¨ ë°ì´í„° ëª¨ë¸ì„ í•©ì¹œ Movie íƒ€ì…ì„ ë§Œë“¤ì–´ì„œ item identifier íƒ€ì…ìœ¼ë¡œ í™œìš©í•˜ë ¤ê³  í–ˆì–´ìš”.
- ê·¸ë¦¬ê³ , ì•„ë˜ì™€ ê°™ì´ ì„œë¡œ ë‹¤ë¥¸ sectionì— itemsë“¤ì„ appendí•˜ë„ë¡ ë¡œì§ì„ êµ¬í˜„í–ˆì–´ìš”.

```swift
// ğŸ¿ in HomeViewController
private var datasource: DataSource?
// âœ… Rank Section
private var movies = [Movie]() {
    didSet {
        applySnapShot()
    }
}
// âœ… genre Section
private var genres = [Movie]() {
    didSet {
        applySnapShot()
    }
}
private func applySnapShot() {
        var snapShot = SnapShot()
        snapShot.appendSections([.rank])
        snapShot.appendItems(movies)

        snapShot.appendSections([.genre])
        snapShot.appendItems(genres)

        self.datasource?.apply(snapShot)
    }
}
```

- ì´ë ‡ê²Œ êµ¬í˜„í•  ê²½ìš°, ì›í•˜ëŠ” ëŒ€ë¡œ ì„œë¡œ ë‹¤ë¥¸ íƒ€ì…ì˜ ë°ì´í„° ëª¨ë¸ì„ í•˜ë‚˜ì˜ diffable datasourceë¥¼ í™œìš©í•˜ì—¬ collection viewì— êµ¬í˜„í•  ìˆ˜ ìˆì—ˆì–´ìš”.
- ê·¸ëŸ¬ë‚˜, ë‘˜ì„ í•©ì¹œ model(item identifier)ì€ optionalì´ ë‚œë¬´í–ˆê³ , ë¶ˆí•„ìš”í•œ ì½”ë“œë“¤ì´ ë§ì´ ìƒê¸°ê²Œ ë˜ì—ˆì–´ìš”.

### 2ï¸âƒ£Â Â í”„ë¡œí† ì½œì„ í™œìš©í•˜ì—¬ item identifier íƒ€ì… êµ¬í˜„í•˜ê¸°

- ë‹´ê³  ì‹¶ì€ ë°ì´í„° íƒ€ì…ì„ `ItemIdenfiable` í”„ë¡œí† ì½œì„ ì±„íƒí•˜ë„ë¡ í•´ìš”.

```swift
// ğŸ’¥ ItemIdenfiable í”„ë¡œí† ì½œ ì •ì˜
protocol ItemIdenfiable {
    var identity: UUID { get set }
}

// ğŸ’¥ í”„ë¡œí† ì½œì„ ì±„íƒí•œ MovieGenre íƒ€ì… ì •ì˜
struct MovieGenre: ItemIdenfiable {
    var identity = UUID()
		...
}

// ğŸ’¥ í”„ë¡œí† ì½œì„ ì±„íƒí•œ Movie íƒ€ì… ì •ì˜
struct Movie: ItemIdenfiable {
    var identity = UUID()
		...
}
```

- `ItemIdenfiable` í•œ í”„ë¡œí¼í‹°ë¥¼ ê°€ì§€ê³  ìˆëŠ” ItemType êµ¬ì¡°ì²´ë¥¼ ì •ì˜í•˜ì—¬ diffable datasourceì˜ item identifier íƒ€ì…ìœ¼ë¡œ í™œìš©í•˜ëŠ” ë°©ì‹ì´ì—ìš”.

```swift
// ğŸ’¥ Item identifier íƒ€ì… êµ¬í˜„
private struct ItemType: Hashable {

    var item: any ItemIdenfiable

    static func == (lhs: MovieHomeViewController.ItemType, rhs: MovieHomeViewController.ItemType) -> Bool {
        return lhs.item.identity == rhs.item.identity
    }

    func hash(into hasher: inout Hasher) {
        hasher.combine(item.identity)
    }

}

private typealias DataSource = UICollectionViewDiffableDataSource<Section, ItemType>
```

- ì•„ë˜ì™€ ê°™ì´ ItemTypeìœ¼ë¡œ `ItemIdenfiable` ì„ ì±„íƒí•œ ë°ì´í„° ëª¨ë¸ì„ ê°ì‹¸ì„œ itemsë¡œ appendí•´ìš”.

```swift
private func applySnapShot() {
        var snapShot = SnapShot()
        snapShot.appendSections(Section.allCases)

        var rankMovies = movieHomeController.movies
        let movieItems = rankMovies.map { ItemType(item:$0) }
        snapShot.appendItems(movieItems, toSection: .rank)

        var allGenres = movieHomeController.genres
        let genreItems = allGenres.map { ItemType(item: $0) }
        snapShot.appendItems(genreItems, toSection: .genre)

        datasource?.apply(snapShot)
}
```

### 2ï¸âƒ£Â enumì˜ ì—°ê´€ ê°’ì„ í™œìš©í•˜ì—¬ Item íƒ€ì… êµ¬í˜„í•˜ê¸°

- ê·¸ëŸ¬ë˜ ì¤‘, ì• í”Œ ê³µì‹ë¬¸ì„œ ì† ì˜ˆì œ ì½”ë“œì—ì„œ ì„œë¡œ ë‹¤ë¥¸ itemë“¤ì„ í•˜ë‚˜ì˜ íƒ€ì…ìœ¼ë¡œ ê°ì‹¸ì„œ í™œìš©í•˜ëŠ” ì½”ë“œë¥¼ ë³´ì•˜ì–´ìš”
- ì´ë¥¼ ì°¸ê³ í•˜ì—¬ ì €ë„ í•˜ë‚˜ì˜ enum íƒ€ì…ìœ¼ë¡œ ì„œë¡œ ë‹¤ë¥¸ sectionì— í™œìš©ë˜ëŠ” ë°ì´í„° ëª¨ë¸ì„ ë¬¶ê³ , ê°ê°ì˜ ëª¨ë¸ì„ enumì˜ ì—°ê´€ ê°’ìœ¼ë¡œ ë„£ì–´ì£¼ëŠ” ë°©ë²•ìœ¼ë¡œ êµ¬í˜„í•´ë³´ê¸°ë¡œ í–ˆì–´ìš”.

```swift
private struct SidebarItem: Hashable {
        let title: String
        let type: SidebarItemType

        enum SidebarItemType {
            case standard, collection, expandableHeader
        }
}

private func createSnapshotOfRecipeCollections() -> NSDiffableDataSourceSectionSnapshot<SidebarItem> {
        let items = recipeSplitViewController.recipeCollections.map { SidebarItem(title: $0, type: .collection) }
        return createSidebarItemSnapshot(.recipeCollectionItems, items: items)
}
```

- ì—°ê´€ ê°’ìœ¼ë¡œ ë‚´ê°€ ë‹´ê³  ì‹¶ì€ ë°ì´í„° ëª¨ë¸ íƒ€ì…ì„ ê°€ì§ˆ ìˆ˜ ìˆëŠ” `item` ì—´ê±°í˜• íƒ€ì… ì •ì˜í•´ìš”.

```swift
private enum Item: Hashable {
    case rank(Movie)
    case gerne(MovieGenre)
}

private typealias DataSource = UICollectionViewDiffableDataSource<Section, Item>
```

- ì•„ë˜ì™€ ê°™ì´ enumì˜ ì—°ê´€ ê°’ìœ¼ë¡œ ë°ì´í„° ëª¨ë¸ì„ ë„£ì–´ì„œ item identifier íƒ€ì…ì„ êµ¬í˜„í•´ìš”.

```swift
private func applySnapShot() {
    var snapShot = SnapShot()
    snapShot.appendSections(Section.allCases)

    var rankMovies = movieHomeController.movies
		// ğŸ’¥ ì—°ê´€ ê°’ ë„£ì–´ì£¼ê¸°
    let movieItems = rankMovies.map { Item.rank($0) }

    var allGenres = movieHomeController.genres
    snapShot.appendItems(movieItems, toSection: .rank)

		// ğŸ’¥ ì—°ê´€ ê°’ ë„£ì–´ì£¼ê¸°
    let genreItems = allGenres.map { Item.gerne($0) }
    snapShot.appendItems(genreItems, toSection: .genre)

    datasource?.apply(snapShot)
}

```

ğŸ’¬ 2,3ë²ˆ ë°©ë²• ëª¨ë‘ ë‹¤, Hashableì„ ë§Œì¡±í•˜ëŠ” íƒ€ì…ìœ¼ë¡œ ë„£ê³  ì‹¶ì€ ë°ì´í„° ëª¨ë¸ì„ ë˜í•‘í–ˆë‹¤ëŠ” ê³µí†µì ì´ ìˆì–´ìš”.

- 2ë²ˆì§¸ protocol ë°©ë²•ì˜ ê²½ìš°, DIP ë²•ì¹™ì„ ë§Œì¡±í•˜ì—¬ `ItemIdentifiable` í”„ë¡œí† ì½œì„ ì±„íƒí•œ ì–´ë–¤ ëª¨ë¸ì´ë“  item identifierê°€ ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì†ì‰½ê²Œ sectionì´ ì¶”ê°€ë  ë•Œë§ˆë‹¤ item íƒ€ì…ì„ ì¶”ê°€í•  ìˆ˜ ìˆì–´ìš”.
- 3ë²ˆì§¸ enumì˜ ì—°ê´€ ê°’ì„ í™œìš©í•œ ê²½ìš°, ì„¹ì…˜ì´ ì¶”ê°€ë  ê²½ìš°, caseë§Œ ì¶”ê°€í•´ì£¼ë©´ ì†ì‰½ê²Œ item íƒ€ì…ì„ ì¶”ê°€í•  ìˆ˜ ìˆì–´ìš”.

â¡ï¸Â ë‘ ê°€ì§€ ë°©ë²• ë‹¤ ì¥ì ì´ ì¡´ì¬í•˜ì§€ë§Œ, enumì„ í™œìš©í•œ ë°©ë²•ì´ caseë¥¼ í†µí•˜ì—¬ í•œëˆˆì— í™œìš©ëœ item typeì´ ë³´ì¸ë‹¤ëŠ” ì ê³¼, cell ì¬ì‚¬ìš© ì‹œ ë¶„ê¸°ì²˜ë¦¬ì—ì„œ ë¶ˆí•„ìš”í•œ default ì¼€ì´ìŠ¤ë¥¼ ì¨ì£¼ì§€ ì•Šì•„ë„ ëœë‹¤ëŠ” ì ì—ì„œ í•´ë‹¹ í”„ë¡œì íŠ¸ì—ì„œëŠ” enum ì¼€ì´ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ item identifier íƒ€ì…ì„ êµ¬í˜„í–ˆì–´ìš”.

</details>

## ğŸ’¥ Collection View ë ˆì´ì•„ì›ƒ ì§œê¸°

<details>
<summary>ğŸ“ Please Open</summary>


 
- ì €ëŠ” ìƒë‹¨ì— ì˜í™” ì •ë³´ë¥¼ ë„ì–´ì£¼ëŠ” ë¶€ë¶„(ì´í•˜ detail view)ê³¼ í•˜ë‹¨ì˜ ì˜í™”ì¸ ì •ë³´ë¥¼ ë³´ì—¬ì£¼ëŠ” ë¶€ë¶„(ì´í•˜ credits view)ì„ compositonal layoutìœ¼ë¡œ êµ¬í˜„í•˜ê¸° ìœ„í•˜ì—¬ ë„¤ ê°€ì§€ ë°©ë²•ì„ ê³ ë¯¼í•´ë³´ì•˜ì–´ìš”.

1. Detail view ì•„ë˜ collection view ë„£ê¸°
2. Header Viewë¥¼ í™œìš©í•´ì„œ Detail Viewë¥¼ êµ¬í˜„í•˜ê¸°
3. Scroll viewì•ˆì— detail viewì™€ collection view ë„£ê¸°
4.  Detail viewë¥¼ ì²« ë²ˆì§¸ sectionì—, credit viewë¥¼ ë‘ ë²ˆì§¸ sectionìœ¼ë¡œ ë„£ê¸°

### 1ï¸âƒ£ Detail view ì•„ë˜ collection view ë„£ê¸° âŒ

<img width="500" alt="image" src="https://github.com/longlivedrgn/ios-movie-app/assets/85781941/08c44040-3cf2-4179-a08e-186818eacc22">

- ê°€ì¥ ë¨¼ì € ìƒê°í–ˆë˜ ë°©ë²•ì´ì—ˆëŠ”ë°, ì´ë ‡ê²Œ êµ¬í˜„í•  ê²½ìš°, ì „ì²´ í™”ë©´ì´ scroll ë˜ì§€ ì•Šê³  credit viewë§Œ ê°€ë¡œë¡œ ìŠ¤í¬ë¡¤ë˜ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆì–´ìš”. ë”°ë¼ì„œ ë‘ ë²ˆì§¸ ë°©ë²•ì„ ìƒê°í•˜ê²Œë˜ì—ˆì–´ìš”.

### 2ï¸âƒ£Â Header Viewë¥¼ í™œìš©í•´ì„œ Detail Viewë¥¼ êµ¬í˜„í•˜ê¸° âŒ
<img width="500" alt="image" src="https://github.com/longlivedrgn/ios-movie-app/assets/85781941/9c9d1469-5787-482d-bbac-573cc8d4898f">


- ì „ì²´ë¥¼ í•˜ë‚˜ì˜ sectionìœ¼ë¡œ êµ¬í˜„í•˜ì—¬ Detail viewë¥¼ headerviewë¡œ êµ¬í˜„í•˜ë ¤ê³  í–ˆì–´ìš”. Detail view ë°‘ì— ê°ë… ë° ë“±ì¥ì¸ë¬¼ì´ë¼ëŠ” section headerê°€ ì¡´ì¬í•˜ë¯€ë¡œ ë‘ ê°œì˜ headerë¥¼ ê°€ì§€ê²Œ ë˜ëŠ” ë ˆì´ì•„ì›ƒì´ì—ˆì–´ìš”. Table viewì˜ ê²½ìš°, ë‘ ê°œì˜ header viewë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ìì—°ìŠ¤ëŸ½ì§€ë§Œ, collection viewì˜ ê²½ìš° 2ê°œì˜ header viewë¥¼ ê°€ì§€ëŠ” ê²ƒì´ ì–´ìƒ‰í–ˆì–´ìš”. ê·¸ë˜ì„œ ë” ì¢‹ì€ ë°©ì‹ì´ ìˆì§€ ì•Šì„ê¹Œ ê³ ë¯¼í•˜ê²Œë˜ì—ˆì–´ìš”.

### 3ï¸âƒ£Â Scroll viewì•ˆì— detail viewì™€ collection view ë„£ê¸° âœ…

<img width="500" alt="image" src="https://github.com/longlivedrgn/ios-movie-app/assets/85781941/f9ff60e5-c73d-43d9-b915-68c1281316eb">


- collection viewëŠ” scroll viewë¥¼ ìƒì† ë°›ëŠ” íƒ€ì…ì´ì—ìš”. ë”°ë¼ì„œ ìœ„ì™€ ê°™ì´ êµ¬í˜„í•˜ë©´ scroll view ì•ˆì— scroll viewë¥¼ ë„£ê²Œë˜ìš”. ì• í”Œì˜ HIG ë¬¸ì„œë¥¼ ì°¸ê³ í•´ë³¸ ê²°ê³¼, ì¤‘ì²© scroll viewë¥¼ ì§€ì–‘í•˜ë¼ê³  í–ˆì§€ë§Œ, ì„œë¡œ ë‹¤ë¥¸ ë°©í–¥ì˜ scroll viewì˜ ì¤‘ì²©ì€ ë¬¸ì œê°€ ë˜ì§€ ì•ŠìŒì„ ì•Œê²Œë˜ì—ˆì–´ìš”. ê·¸ëŸ¬ë‚˜, scroll viewë¥¼ í™œìš©í•´ì„œ ìƒê¸°ëŠ” ê¹Œë‹¤ë¡œìš´ ë ˆì´ì•„ì›ƒ ì¡ê¸° ê³¼ì •ì„ í”¼í•˜ê³  ì‹¶ì–´ 4ë²ˆì§¸ ë°©ë²•ì„ ìƒê°í•˜ê²Œëì–´ìš”.

> **Avoid putting a scroll view inside another scroll view with the same orientation.**Â Doing so creates an unpredictable interface thatâ€™s difficult to control. Itâ€™s alright to place a horizontal scroll view inside a vertical scroll view (or vice versa), however.
> 

### 4ï¸âƒ£Â Detail viewë¥¼ ì²« ë²ˆì§¸ sectionì—, credit viewë¥¼ ë‘ ë²ˆì§¸ sectionìœ¼ë¡œ ë„£ê¸° âœ…

<img width="500" alt="image" src="https://github.com/longlivedrgn/ios-movie-app/assets/85781941/defdf0e8-46a1-4e31-8680-8e3f1c326804">

- ì²« ë²ˆì§¸ sectionì—ëŠ” detail view cell í•˜ë‚˜ë§Œì„ ë³´ì—¬ì£¼ê³ , ë‘ ë²ˆì§¸ sectionì—ì„œëŠ” credit viewë¥¼ ë³´ì—¬ì£¼ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ì„ í–ˆì–´ìš”. í•´ë‹¹ ë°©ë²•ì„ í™œìš©í•˜ë‹ˆ, ì „ì²´ í™”ë©´ì´ scrollì´ ë˜ë©´ì„œ ì›í•˜ëŠ” layoutì„ êµ¬í˜„í•  ìˆ˜ ìˆì—ˆì–´ìš”.

</details>

## ğŸ’¥ ê°€ë³€ì ì¸ cell êµ¬í˜„í•˜ê¸°
<details>
<summary>ğŸ“ Please Open</summary>


- feat. cellì•ˆì— ë²„íŠ¼ ë„£ê¸°

| ë””í…Œì¼ ë·° |
| --- |
|<img src="https://github.com/longlivedrgn/ios-movie-app/assets/85781941/ab1bfc3c-e898-410b-80fb-248a27002045" width="250"/>|

- Detail viewì•ˆì— ë”ë³´ê¸° ë²„íŠ¼ì„ ì¶”ê°€í•˜ì—¬ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ labelì˜ numberOfLinesê°€ ë³€ê²½ë˜ì–´, cellì˜ heightê°€ ëŠ˜ì–´ë‚˜ëŠ” ë™ì ì¸ cellì„ ë§Œë“œë ¤ê³  í–ˆì–´ìš”.
- Delegate íŒ¨í„´ì„ í†µí•˜ì—¬ button íƒ­ì´ ë˜ë©´, view controllerê°€ labelì˜ numberOfLinesë¥¼ ë³€ê²½í•˜ê³ , buttonì˜ íƒ€ì´í‹€ì„ ë³€ê²½í•˜ë„ë¡ êµ¬í˜„í–ˆì–´ìš”.

```swift
// ğŸŒˆ delegate íŒ¨í„´ í™œìš©!
protocol MovieDetailFirstSectionViewDelegate: AnyObject {
    func movieDetailFirstSectionView(
        _ movieDetailFirstSectionView: MovieDetailFirstSectionView,
        didButtonTapped sender: UIButton
    )
}
```

- ë˜í•œ NSCollectionLayoutSectionì„ êµ¬í˜„í•˜ëŠ” ì½”ë“œì—ì„œ itemsize ë° groupsizeë¥¼ `.fractional`ì´ë‚˜ `.absolute`ê°€ ì•„ë‹Œ `.estimated`ì„ í†µí•˜ì—¬ êµ¬í˜„í–ˆì–´ìš”. ë˜í•œ, viewì•ˆì˜ layoutì„ ê¸°ì¡´ì˜ `equalTo`ê°€ ì•„ë‹Œ `greaterThanEqual`ë“±ìœ¼ë¡œ êµ¬í˜„ì„ í•´ì£¼ì—ˆì–´ìš”.

```swift
// ğŸ¿ in MovieDetailViewController
private func createDetailLayout() -> NSCollectionLayoutSection {
        let itemSize = NSCollectionLayoutSize(
            widthDimension: .fractionalWidth(1),
						// ğŸ’¦ .estimated í™œìš©
            heightDimension: .estimated(600)
        )
        let item = NSCollectionLayoutItem(layoutSize: itemSize)
        let groupSize = NSCollectionLayoutSize(
            widthDimension: .fractionalWidth(1),
            heightDimension: .estimated(600)
        )

        let group = NSCollectionLayoutGroup.horizontal(layoutSize: groupSize, subitems: [item])

        let section = NSCollectionLayoutSection(group: group)

        return section
    }
```
</details>


## ğŸ’¥ ë¬´ê±°ì›Œì§„ view controller ëœì–´ë‚´ê¸°
<details>
<summary>ğŸ“ Please Open</summary>

 
- MVC êµ¬ì¡°ë¡œ ë¡œì§ì„ ì§œë‹¤ë³´ë‹ˆ, view controllerê°€ ë§ì´ ë¬´ê±°ì›Œì¡Œì–´ìš”. View controllerëŠ” collection viewë¥¼ êµ¬í˜„í•˜ëŠ” ë‹¤ì–‘í•œ ë¡œì§ê³¼ ë‹¤ë¥¸ delegateì„ ì±„íƒí•œ ë‹¤ì–‘í•œ ë©”ì†Œë“œê°€ ì¡´ì¬í–ˆì–´ìš”. ë˜í•œ, Networkingì„ í•˜ë©° í•„ìš”í•œ dataë¥¼ ë°›ì•„ì˜¤ëŠ” ë¡œì§ ë˜í•œ view controllerê°€ ê´€ì¥í•˜ê³  ìˆì—ˆì–´ìš”.
- ì €ëŠ” ë„ˆë¬´ ì»¤ì§„ view controllerì˜ ì—­í• ì„ ì¤„ì´ê¸° ìœ„í•˜ì—¬ controllerë¼ëŠ” ëª¨ë¸ íƒ€ì…ì„ ìƒì„±í–ˆì–´ìš”. í•´ë‹¹ íƒ€ì…ì€ MVC êµ¬ì¡°ì—ì„œ Modelì˜ ì—­í• ì´ë©° ë°ì´í„°ì™€ ê´€ë ¨ëœ ë‚´ìš© ë° ë¡œì§ì„ ê°€ì§€ê³  ìˆì§€ë§Œ, UIì™€ëŠ” ì§ì ‘ì ìœ¼ë¡œ ì—°ê²°ë˜ì§€ ì•Šì•„ìš”. ì¦‰, Model íƒ€ì…ì€ view controllerë¥¼ ëª¨ë¥´ì§€ë§Œ, view controllerëŠ” modelì„ ë‚´ë¶€ í”„ë¡œí¼í‹°ë¡œ ê°€ì§€ê³  ìˆì–´ìš”.
- Modelì€ API í†µì‹ ì„ í†µí•˜ì—¬ view controllerê°€ collection viewì— ë„ìš¸ ë•Œ í™œìš©í•˜ëŠ” ë°ì´í„° ëª¨ë¸ íƒ€ì…ì„ ìƒì„±í•´ìš”. ê·¸ë¦¬ê³  model íƒ€ì…ì„ ì™„ì„±í•˜ë©´ observer íŒ¨í„´ì„ í†µí•˜ì—¬ view controllerì—ê²Œ modelì´ ì™„ì„±ë˜ì—ˆìŒì„ ì•Œë ¤ì£¼ê³ , view controllerëŠ” í•´ë‹¹ modelì„ í†µí•˜ì—¬ collection viewë¥¼ ë„ìš°ê²Œ ë¼ìš”.

ğŸ”ŠÂ `Controller` - MovieDetailController

```swift
final class MovieDetailModel {

    private let movie: Movie
		// ğŸŒŸ ë„¤íŠ¸ì›Œí¬ ê°ì²´
    private let movieNetworkAPIManager = NetworkAPIManager()
    private let movieNetworkDispatcher = NetworkDispatcher()

   ...

    private func fetchMovieDetails() {
				// ğŸ”¥ ë°ì´í„°  ëª¨ë¸ ìƒì„±
        guard let movieID = movie.ID else { return }
        let movieDetailEndPoint = MovieDetailsAPIEndPoint(movieCode: movieID)
        let movieCertificationEndPoint = MovieCertificationAPIEndPoint(movieCode: movieID)
        Task {
            do {
               ....
                }
            } catch {
							 ....
            }
            NotificationCenter.default.post(
                name: NSNotification.Name("MovieDetailModelDidFetchCreditData"),
                object: nil
            )
        }
    }
```

ğŸ”ŠÂ `ViewController` - MovieDetailViewController

```swift
// ğŸ¿ in configureNotificationCenter()
NotificationCenter.default.addObserver(
    self,
    selector: #selector(didFetchMovieCreditsData(_:)),
    name: NSNotification.Name("MovieDetailModelDidFetchCreditData"),
    object: nil
)
// ğŸ¿ in MovieDetailViewController
@objc private func didFetchMovieCreditsData(_ notification: Notification) {
        DispatchQueue.main.async {
            self.movieDetailCollectionView.reloadSections([Section.credit.rawValue])
        }
    }
```

ğŸ’¬ ì´ë¥¼ í†µí•´ì„œ, view controllerëŠ” viewì™€ ê´€ë ¨ ì—†ëŠ” ì½”ë“œë¥¼ ëœì–´ë‚¼ ìˆ˜ ìˆì—ˆê³ , view controllerì˜ ì—­í• ì´ ë§ì•„ì ¸ì„œ ë–¨ì–´ì§€ë˜ ì½”ë“œì˜ ê°€ë…ì„± ê°œì„ í•  ìˆ˜ ìˆì—ˆì–´ìš”.


</details>

## ğŸ’¥Â View controllerì˜ ìˆœí™˜ ì°¸ì¡° ë¬¸ì œ

<details>
<summary>ğŸ“ Please Open</summary>

 
- í•´ë‹¹ ì•±ì€ NotificationCenterë¥¼ í™œìš©í•˜ì—¬ viewë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë¡œì§ì„ í™œìš©í•´ìš”.
- ê·¸ë¦¬ê³  navigation controllerë¥¼ í™œìš©í•˜ì—¬ pushê°€ ë˜ê³  popì´ë˜ë©´ popëœ view controllerëŠ” ìë™ìœ¼ë¡œ deinitì´ ë˜ë©´ì„œ NotificationCenterê°€ ìë™ìœ¼ë¡œ removeê°€ ë¼ìš”.

ì•„ë˜ì˜ ì• í”Œ ê³µì‹ë¬¸ì„œë¥¼ ì½ì–´ë³´ë©´ ê°œë°œìê°€ ì§ì ‘ì ìœ¼ë¡œ NotificationCenterë¥¼ removeí•˜ì§€ ì•Šì•„ë„ ë¨ì„ ì•Œ ìˆ˜ ìˆì–´ìš”.

[ì• í”Œ ê³µì‹ë¬¸ì„œ](https://developer.apple.com/documentation/foundation/notificationcenter/1415360-addobserver)

> Unregister an observer to stop receiving notifications.
To unregister an observer, use removeObserver(*:) or removeObserver(*:name:object:) with the most specific detail possible. For example, if you used a name and object to register the observer, use the name and object to remove it.
**If your app targets iOS 9.0 and later or macOS 10.11 and later, you do not need to unregister an observer that you created with this function. If you forget or are unable to remove an observer, the system cleans up the next time it would have posted to it.**
> 

- ê·¸ëŸ¬ë‚˜, í”„ë¡œì íŠ¸ ì§„í–‰ ì¤‘ Notificationì´ ì¤‘ë³µìœ¼ë¡œ ë°›ì•„ì§€ëŠ” ê²½ìš°ë¥¼ í™•ì¸í–ˆì–´ìš”.
    - Home viewcontrollerì—ì„œ detail viewcontrollerë¡œ ë„˜ì–´ê°ˆ ë•Œ, NotificationCenterë¥¼ addObserverë¥¼ í•˜ëŠ” ë°, detail view controllerê°€ popë  ë•Œì— Notification centerê°€ removeê°€ ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ê³„ì†í•´ì„œ Notificationì´ ì¤‘ë³µìœ¼ë¡œ ë°›ì•„ì§€ëŠ” ê²ƒì´ì—ˆì–´ìš”.

**ğŸ–ï¸Â ìœ„ì™€ ê°™ì€ ìƒí™©ì´ ì¼ì–´ë‚˜ëŠ” ì´ìœ ëŠ” detail view controllerê°€ popë  ë•Œ, view controller ì† í´ë¡œì ¸ë‚˜ delegate ë³€ìˆ˜ì— ì˜í•´ì„œ ìˆœí™˜ì°¸ì¡°ê°€ ì¼ì–´ë‚˜ ë©”ëª¨ë¦¬ì—ì„œ í• ë‹¹ í•´ì œ(deinit)ì´ ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì´ì—ˆì–´ìš”.**

- ë”°ë¼ì„œ ì•„ë˜ì™€ ê°™ì´ ì•½í•œ ì°¸ì¡°(weak)ë¥¼ í™œìš©í•˜ì—¬ view controllerê°€ popë  ë•Œ, ë©”ëª¨ë¦¬ì—ì„œ í• ë‹¹ í•´ì œê°€ ë  ìˆ˜ ìˆê²Œ ë³€ê²½í•´ì£¼ì—ˆì–´ìš”.

```swift
private func createlayout() -> UICollectionViewCompositionalLayout {
    let layout = UICollectionViewCompositionalLayout { [weak self] sectionIndex, layoutEnvironment in
        let sectionType = Section.allCases[sectionIndex]
        switch sectionType {
        case .detail:
            return self?.createDetailLayout()
        case .credit:
            return self?.createCreditLayout()
        }
    }
    return layout
}
```

ğŸ’¬ ì´ë¥¼ í†µí•´ì„œ, popë  ë•Œ, ì •ìƒì ìœ¼ë¡œ view controllerê°€ ë©”ëª¨ë¦¬ì—ì„œ í• ë‹¹ í•´ì œê°€ ë˜ì–´ Notificationì´ ì¤‘ë³µìœ¼ë¡œ ë°›ì•„ì§€ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆì–´ìš”.

</details>

